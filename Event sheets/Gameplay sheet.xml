<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Gameplay sheet</name>
    <events>
        <variable constant="0" name="rspeed" sid="8075979722211104" static="0" type="number">0</variable>
        <variable constant="0" name="FirstSwing" sid="6241019882382003" static="0" type="number">1</variable>
        <variable constant="0" name="omega" sid="6350130948550585" static="0" type="number">0</variable>
        <include>GameObjectInteration</include>
        <event-group description="" sid="9002456867769247" title="Initialization">
            <sub-events>
                <event-block sid="4072104659286893">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="2447334150881675" type="System" />
                    </conditions>
                    <actions>
                        <action id="-25" name="Move to bottom" sid="5885856433668573" type="TilemapStoneWall_lvl_2" />
                        <action id="-24" name="Move to top" sid="8258585963108275" type="player" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="631818763560375" title="Game Controller ">
            <sub-events>
                <event-block disabled="1" sid="5450152055627478">
                    <conditions>
                        <condition id="-4" name="Is outside layout" sid="1276219039971941" type="player" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="9725213000264983" type="player" />
                        <action id="-26" name="Restart layout" sid="6738484116236032" type="System" />
                        <action id="-3" name="Create object" sid="7730467389266514" type="System">
                            <param id="0" name="Object to create">player</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">96</param>
                            <param id="3" name="Y">256</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1898108749148819">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="8198951412576255" type="System" />
                    </conditions>
                    <actions>
                        <action disabled="1" id="0" name="Set text" sid="3668808539175459" type="debug_text">
                            <param id="0" name="Text">player.Platform.VectorX</param>
                        </action>
                        <action disabled="1" id="-13" name="Set time scale" sid="9428215870687307" type="System">
                            <param id="0" name="Time scale">0.5</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="5060678084619578" title="Camera" />
        <event-group description="" sid="705772945378927" title="Player controlls">
            <sub-events>
                <variable constant="0" name="StateBefore" sid="3406157777552562" static="0" type="text"></variable>
                <event-group description="" sid="6592181783067031" title="Get Player State">
                    <sub-events>
                        <event-block sid="6391726117686858">
                            <conditions>
                                <condition id="-1" name="Every tick" sid="7299985530777388" type="System" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="2982906613835709" type="System">
                                    <param id="0" name="Variable">StateBefore</param>
                                    <param id="1" name="Value">player.AnimationName</param>
                                </action>
                                <action id="0" name="Set text" sid="4839576854373221" type="debug_text">
                                    <param id="0" name="Text">StateBefore</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6161285146741107">
                            <conditions>
                                <condition behavior="Platform" id="2" name="Is on floor" sid="5501326786112329" type="player" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="6971042331796624" type="player">
                                    <param id="0" name="Animation">&quot;Default&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="9077675820439701">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="1617026071018325" type="player">
                                            <param id="0" name="Instance variable">Anchored</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="1886688573753196" type="Line">
                                            <param id="0" name="Instance variable">l</param>
                                            <param id="1" name="Comparison">5</param>
                                            <param id="2" name="Value">player.MinLine</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set animation" sid="881465102849466" type="player">
                                            <param id="0" name="Animation">&quot;Swinging&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="8414154770755948">
                            <conditions>
                                <condition id="-22" name="Else" sid="1407828911186529" type="System" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="4517972914755116" type="player">
                                    <param id="0" name="Animation">&quot;Jumping&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="8813215452605087">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="4490386194124528" type="player">
                                            <param id="0" name="Instance variable">Anchored</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="6216236688345306" type="Line">
                                            <param id="0" name="Instance variable">l</param>
                                            <param id="1" name="Comparison">5</param>
                                            <param id="2" name="Value">player.MinLine</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="4" name="Set animation" sid="4963882770643265" type="player">
                                            <param id="0" name="Animation">&quot;Swinging&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block any="1" sid="501713067650176">
                                    <conditions>
                                        <condition behavior="Platform" id="10" name="Is by wall" sid="1589551453731827" type="player">
                                            <param id="0" name="Side">0</param>
                                        </condition>
                                        <condition behavior="Platform" id="10" name="Is by wall" sid="4095465283140142" type="player">
                                            <param id="0" name="Side">1</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="230251099984831">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="2158091916360711" type="System">
                                                    <param id="0" name="First value">player.Platform.VectorY</param>
                                                    <param id="1" name="Comparison">2</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="4" name="Set animation" sid="487453788260542" type="player">
                                                    <param id="0" name="Animation">&quot;WallUp&quot;</param>
                                                    <param id="1" name="From">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="2003114578279811">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="3047326586539508" type="System" />
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block any="1" sid="5711199616793224">
                                                    <conditions>
                                                        <condition id="-14" name="Compare variable" sid="6428197262554842" type="System">
                                                            <param id="0" name="Variable">StateBefore</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">&quot;WallUp&quot;</param>
                                                        </condition>
                                                        <condition id="-14" name="Compare variable" sid="14591889321511" type="System">
                                                            <param id="0" name="Variable">StateBefore</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">&quot;Jumping&quot;</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action behavior="Timer" id="0" name="Start timer" sid="5246750750623081" type="player">
                                                            <param id="0" name="Duration">0.5</param>
                                                            <param id="1" name="Type">0</param>
                                                            <param id="2" name="Tag">&quot;Slip&quot;</param>
                                                        </action>
                                                        <action behavior="Platform" id="9" name="Set vector Y" sid="3398663694447031" type="player">
                                                            <param id="0" name="Vector Y">0</param>
                                                        </action>
                                                        <action id="4" name="Set animation" sid="4673937480713696" type="player">
                                                            <param id="0" name="Animation">&quot;WallHold&quot;</param>
                                                            <param id="1" name="From">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="7613953008721955">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="5205152586204739" type="System" />
                                                        <condition id="-14" name="Compare variable" sid="9597275528393703" type="System">
                                                            <param id="0" name="Variable">StateBefore</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">&quot;WallDown&quot;</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="4" name="Set animation" sid="9027729950031442" type="player">
                                                            <param id="0" name="Animation">&quot;WallDown&quot;</param>
                                                            <param id="1" name="From">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="9931703065756765">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="2208391226716407" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="4" name="Set animation" sid="6149851104469274" type="player">
                                                            <param id="0" name="Animation">&quot;WallHold&quot;</param>
                                                            <param id="1" name="From">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="6085508062233251">
                            <conditions>
                                <condition behavior="Timer" id="0" name="On timer" sid="4101612925666411" type="player">
                                    <param id="0" name="Tag">&quot;Slip&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="6465564339619484" type="player">
                                    <param id="0" name="Animation">&quot;WallDown&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-block sid="2572534074983206">
                    <conditions>
                        <condition id="2" name="Is playing" sid="6974318477961289" type="player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="3" name="Set deceleration" sid="9214695985589263" type="player">
                            <param id="0" name="Deceleration">1500</param>
                        </action>
                        <action behavior="Platform" id="2" name="Set acceleration" sid="4684381620795357" type="player">
                            <param id="0" name="Acceleration">600</param>
                        </action>
                        <action behavior="Platform" id="1" name="Set max speed" sid="8513980519337245" type="player">
                            <param id="0" name="Max Speed">400</param>
                        </action>
                        <action behavior="Platform" id="5" name="Set gravity" sid="2087737340087224" type="player">
                            <param id="0" name="Gravity">1500</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1420169497476744">
                    <conditions>
                        <condition id="2" name="Is playing" sid="1605586880802708" type="player">
                            <param id="0" name="Animation">&quot;Jumping&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="3" name="Set deceleration" sid="9501488357792073" type="player">
                            <param id="0" name="Deceleration">750</param>
                        </action>
                        <action behavior="Platform" id="2" name="Set acceleration" sid="9051905834576378" type="player">
                            <param id="0" name="Acceleration">500</param>
                        </action>
                        <action behavior="Platform" id="1" name="Set max speed" sid="7874026038123062" type="player">
                            <param id="0" name="Max Speed">400</param>
                        </action>
                        <action behavior="Platform" id="5" name="Set gravity" sid="6474285298386477" type="player">
                            <param id="0" name="Gravity">1500</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5173217092361023">
                    <conditions>
                        <condition id="2" name="Is playing" sid="351266643965616" type="player">
                            <param id="0" name="Animation">&quot;WallUp&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="5" name="Set gravity" sid="1004357253833192" type="player">
                            <param id="0" name="Gravity">1000</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1686275387133527">
                    <conditions>
                        <condition id="2" name="Is playing" sid="4775366134880695" type="player">
                            <param id="0" name="Animation">&quot;WallHold&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="5" name="Set gravity" sid="3932686381855267" type="player">
                            <param id="0" name="Gravity">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="712445275973984">
                    <conditions>
                        <condition id="2" name="Is playing" sid="9375373390809387" type="player">
                            <param id="0" name="Animation">&quot;WallDown&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="5" name="Set gravity" sid="3459090460129435" type="player">
                            <param id="0" name="Gravity">200</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="6387424116583544">
                    <conditions>
                        <condition id="2" name="Is playing" sid="9324128111275393" type="player">
                            <param id="0" name="Animation">&quot;Swinging&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="5" name="Set gravity" sid="996283140326798" type="player">
                            <param id="0" name="Gravity">0</param>
                        </action>
                        <action behavior="Platform" id="3" name="Set deceleration" sid="3930049166017357" type="player">
                            <param id="0" name="Deceleration">0</param>
                        </action>
                        <action behavior="Platform" id="2" name="Set acceleration" sid="7289148936234086" type="player">
                            <param id="0" name="Acceleration">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5431687572431608">
                    <conditions>
                        <condition id="2" name="Key is down" sid="1694791133075243" type="Keyboard">
                            <param id="0" name="Key">65 (A)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="6544362008405953">
                            <conditions>
                                <condition id="2" name="Is playing" sid="5898960926259325" type="player">
                                    <param id="0" name="Animation">&quot;Default&quot;</param>
                                </condition>
                                <condition id="2" name="Is playing" sid="1367926824682299" type="player">
                                    <param id="0" name="Animation">&quot;Jumping&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block any="1" sid="9053236025673111">
                                    <conditions />
                                    <actions>
                                        <action behavior="Platform" id="7" name="Simulate control" sid="1571192706685998" type="player">
                                            <param id="0" name="Control">0</param>
                                        </action>
                                        <action id="7" name="Set mirrored" sid="8460181882998895" type="player">
                                            <param id="0" name="State">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="9772459628809116">
                            <conditions>
                                <condition id="2" name="Is playing" sid="2063235996705873" type="player">
                                    <param id="0" name="Animation">&quot;Swinging&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Add to" sid="2914759321791922" type="System">
                                    <param id="0" name="Variable">rspeed</param>
                                    <param id="1" name="Value">400*dt</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="736422497680356">
                    <conditions>
                        <condition id="2" name="Key is down" sid="6694645273403699" type="Keyboard">
                            <param id="0" name="Key">68 (D)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="1834231835222965">
                            <conditions>
                                <condition id="2" name="Is playing" sid="9991851938431492" type="player">
                                    <param id="0" name="Animation">&quot;Default&quot;</param>
                                </condition>
                                <condition id="2" name="Is playing" sid="3056582639332581" type="player">
                                    <param id="0" name="Animation">&quot;Jumping&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block any="1" sid="7592813420620835">
                                    <conditions />
                                    <actions>
                                        <action behavior="Platform" id="7" name="Simulate control" sid="4380724256690375" type="player">
                                            <param id="0" name="Control">1</param>
                                        </action>
                                        <action id="7" name="Set mirrored" sid="6216102423190629" type="player">
                                            <param id="0" name="State">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="9169247634186189">
                            <conditions>
                                <condition id="2" name="Is playing" sid="6726038190030958" type="player">
                                    <param id="0" name="Animation">&quot;Swinging&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Add to" sid="3640962838775343" type="System">
                                    <param id="0" name="Variable">rspeed</param>
                                    <param id="1" name="Value">-400*dt</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="1459494504203031">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="1042804695785424" type="Keyboard">
                            <param id="0" name="Key">32 (Space)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="8027621164692695">
                            <conditions>
                                <condition id="2" name="Is playing" sid="7674563414137378" type="player">
                                    <param id="0" name="Animation">&quot;Default&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="Platform" id="7" name="Simulate control" sid="4323141178294995" type="player">
                                    <param id="0" name="Control">2</param>
                                </action>
                                <action behavior="Platform" disabled="1" id="9" name="Set vector Y" sid="7606911202100392" type="player">
                                    <param id="0" name="Vector Y">-500</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block any="1" sid="5057696739579582">
                            <conditions>
                                <condition id="2" name="Is playing" sid="8984645401458499" type="player">
                                    <param id="0" name="Animation">&quot;Wallup&quot;</param>
                                </condition>
                                <condition id="2" name="Is playing" sid="7259645178942074" type="player">
                                    <param id="0" name="Animation">&quot;WallHold&quot;</param>
                                </condition>
                                <condition id="2" name="Is playing" sid="8798509488550335" type="player">
                                    <param id="0" name="Animation">&quot;WallDown&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="8787072574487489">
                                    <conditions>
                                        <condition behavior="Platform" id="10" name="Is by wall" sid="8414994529091517" type="player">
                                            <param id="0" name="Side">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="Platform" id="9" name="Set vector Y" sid="1078975717604527" type="player">
                                            <param id="0" name="Vector Y">-player.WallJumpVert</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="3599745067961462">
                                            <conditions>
                                                <condition id="2" name="Key is down" sid="4762463183236333" type="Keyboard">
                                                    <param id="0" name="Key">68 (D)</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="Platform" id="8" name="Set vector X" sid="6075906146905695" type="player">
                                                    <param id="0" name="Vector X">player.WallJumpHoriz</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="8063902172744341">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="5532814122456913" type="System" />
                                            </conditions>
                                            <actions>
                                                <action behavior="Platform" id="8" name="Set vector X" sid="9402162243862645" type="player">
                                                    <param id="0" name="Vector X">player.WallJumpHoriz /2</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="2106795928471693">
                                    <conditions>
                                        <condition behavior="Platform" id="10" name="Is by wall" sid="5023242856541543" type="player">
                                            <param id="0" name="Side">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action behavior="Platform" id="9" name="Set vector Y" sid="3114939263825653" type="player">
                                            <param id="0" name="Vector Y">-player.WallJumpVert</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="4192518886263112">
                                            <conditions>
                                                <condition id="2" name="Key is down" sid="6872842069295012" type="Keyboard">
                                                    <param id="0" name="Key">65 (A)</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action behavior="Platform" id="8" name="Set vector X" sid="2433074843485387" type="player">
                                                    <param id="0" name="Vector X">-player.WallJumpHoriz</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="5169143934508942">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="7438691453773275" type="System" />
                                            </conditions>
                                            <actions>
                                                <action behavior="Platform" id="8" name="Set vector X" sid="1675773394374165" type="player">
                                                    <param id="0" name="Vector X">-player.WallJumpHoriz /2</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="2263437655954312">
                            <conditions>
                                <condition id="2" name="Is playing" sid="9738357105408729" type="player">
                                    <param id="0" name="Animation">&quot;Swinging&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="3811969568564828" type="player">
                                    <param id="0" name="Instance variable">Anchored</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action behavior="Platform" id="9" name="Set vector Y" sid="6236609514904582" type="player">
                                    <param id="0" name="Vector Y">-player.Platform.JumpStrength</param>
                                </action>
                                <action id="-9" name="Destroy" sid="3614269740193765" type="Line" />
                                <action behavior="Platform" id="8" name="Set vector X" sid="5212588826773873" type="player">
                                    <param id="0" name="Vector X">-rspeed</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="8787184125340181">
                    <conditions>
                        <condition id="-19" name="Pick all" sid="7608263535990466" type="System">
                            <param id="0" name="Object">Line</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="1570909156830455" type="Line">
                            <param id="0" name="Instance variable">l</param>
                            <param id="1" name="Value">distance(Line.X,Line.Y,Line.EndX,Line.EndY)</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="3260489373886816">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="541180201792197" type="System">
                                    <param id="0" name="First value">Line.l</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">player.MaxLine</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="9047269908880229" type="Line" />
                                <action id="-10" name="Set value" sid="3357125609945829" type="player">
                                    <param id="0" name="Instance variable">Anchored</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="3351286140688566">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="5817276810719172" type="Line">
                            <param id="0" name="Object">TilemapStoneWall_lvl_2</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="8477132391860291" type="player">
                            <param id="0" name="Instance variable">Anchored</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="8042433940122836" type="player">
                            <param id="0" name="Instance variable">Anchored</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="6153039187668075" type="Line">
                            <param id="0" name="Instance variable">l</param>
                            <param id="1" name="Value">distance(Line.X,Line.Y,Line.EndX,Line.EndY)</param>
                        </action>
                        <action id="-10" name="Set value" sid="1383310935705949" type="Line">
                            <param id="0" name="Instance variable">theta</param>
                            <param id="1" name="Value">(angle(Line.EndX,Line.EndY,Line.X,Line.Y) -90)</param>
                        </action>
                        <action id="-10" name="Set value" sid="4091705272086773" type="Line">
                            <param id="0" name="Instance variable">theta0</param>
                            <param id="1" name="Value">Line.theta</param>
                        </action>
                        <action id="-9" name="Set value" sid="7575805136197628" type="System">
                            <param id="0" name="Variable">omega</param>
                            <param id="1" name="Value">rspeed/Line.l</param>
                        </action>
                        <action behavior="Platform" id="5" name="Set gravity" sid="9133135004347579" type="player">
                            <param id="0" name="Gravity">0</param>
                        </action>
                        <action behavior="Platform" disabled="1" id="8" name="Set vector X" sid="5092222549303034" type="player">
                            <param id="0" name="Vector X">0</param>
                        </action>
                        <action behavior="Platform" disabled="1" id="9" name="Set vector Y" sid="8596315082169038" type="player">
                            <param id="0" name="Vector Y">0</param>
                        </action>
                        <action id="-9" name="Set value" sid="8417967427597594" type="System">
                            <param id="0" name="Variable">FirstSwing</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Wall jumping logic</comment>
                <variable constant="0" name="nTheta" sid="4610636032685275" static="0" type="number">0</variable>
                <variable constant="0" name="diry" sid="35611610044463" static="0" type="number">0</variable>
                <variable constant="0" name="rdirx" sid="919697058745329" static="0" type="number">0</variable>
                <variable constant="0" name="rdiry" sid="6076454053444178" static="0" type="number">0</variable>
                <variable constant="0" name="pnx" sid="7146961741657799" static="0" type="number">0</variable>
                <variable constant="0" name="dirx" sid="3143441295808318" static="0" type="number">0</variable>
                <variable constant="0" name="pny" sid="5798698738953051" static="0" type="number">0</variable>
                <variable constant="0" name="theta" sid="9827701756741854" static="0" type="number">0</variable>
                <event-block sid="9189458487760058">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="3601752732806005" type="System">
                            <param id="0" name="Variable">FirstSwing</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="6776305735649489" type="Line">
                            <param id="0" name="Instance variable">l</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">player.MinLine</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="7262464161327817" type="System">
                            <param id="0" name="Variable">rspeed</param>
                            <param id="1" name="Value">-player.Platform.VectorX</param>
                        </action>
                        <action id="-9" name="Set value" sid="8250409941468892" type="System">
                            <param id="0" name="Variable">FirstSwing</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5500504275990586">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="3714215989469629" type="player">
                            <param id="0" name="Instance variable">Anchored</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="409469344686482" type="Line">
                            <param id="0" name="Instance variable">l</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">player.MinLine</param>
                        </condition>
                        <condition id="2" name="Is playing" sid="4200630168002721" type="player">
                            <param id="0" name="Animation">&quot;Swinging&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Platform" id="8" name="Set vector X" sid="2250578580995421" type="player">
                            <param id="0" name="Vector X">0</param>
                        </action>
                        <action behavior="Platform" id="9" name="Set vector Y" sid="7618086080155318" type="player">
                            <param id="0" name="Vector Y">0</param>
                        </action>
                        <action id="-10" name="Set value" sid="3842872244858558" type="Line">
                            <param id="0" name="Instance variable">theta</param>
                            <param id="1" name="Value">(angle(Line.EndX,Line.EndY,Line.X,Line.Y) -90)</param>
                        </action>
                        <action id="-10" name="Add to" sid="2305907056037397" type="System">
                            <param id="0" name="Variable">rspeed</param>
                            <param id="1" name="Value">-sin(Line.theta) *1500*dt</param>
                        </action>
                        <action id="-9" name="Set value" sid="8270805169113515" type="System">
                            <param id="0" name="Variable">omega</param>
                            <param id="1" name="Value">rspeed/Line.l *50</param>
                        </action>
                        <action id="-9" name="Set value" sid="5649376420774155" type="System">
                            <param id="0" name="Variable">nTheta</param>
                            <param id="1" name="Value">Line.theta+omega*dt</param>
                        </action>
                        <action id="-10" name="Set value" sid="7352429985365474" type="Line">
                            <param id="0" name="Instance variable">theta</param>
                            <param id="1" name="Value">nTheta</param>
                        </action>
                        <action id="-9" name="Set value" sid="7279231564844262" type="System">
                            <param id="0" name="Variable">dirx</param>
                            <param id="1" name="Value">player.X-Line.EndX</param>
                        </action>
                        <action id="-9" name="Set value" sid="6265595210754081" type="System">
                            <param id="0" name="Variable">diry</param>
                            <param id="1" name="Value">player.Y-Line.EndY</param>
                        </action>
                        <action id="-9" name="Set value" sid="9616878105614094" type="System">
                            <param id="0" name="Variable">rdirx</param>
                            <param id="1" name="Value">cos(omega*dt)*dirx - sin(omega*dt) * diry</param>
                        </action>
                        <action id="-9" name="Set value" sid="6907059681107259" type="System">
                            <param id="0" name="Variable">rdiry</param>
                            <param id="1" name="Value">sin(omega*dt) * dirx + cos(omega*dt) * diry</param>
                        </action>
                        <action id="-9" name="Set value" sid="2787833280544642" type="System">
                            <param id="0" name="Variable">pnx</param>
                            <param id="1" name="Value">rdirx +Line.EndX</param>
                        </action>
                        <action id="-9" name="Set value" sid="4826521788265448" type="System">
                            <param id="0" name="Variable">pny</param>
                            <param id="1" name="Value">rdiry+Line.EndY</param>
                        </action>
                        <action id="-3" name="Set position" sid="3134510706574268" type="player">
                            <param id="0" name="X">pnx</param>
                            <param id="1" name="Y">pny</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" disabled="1" sid="5930130816849397" title="Slide and Chrouch">
            <sub-events>
                <event-block disabled="1" sid="8498929989423874">
                    <conditions>
                        <condition id="2" name="Key is down" sid="6196954681218194" type="Keyboard">
                            <param id="0" name="Key">83 (S)</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block disabled="1" sid="8817335933841648">
                            <conditions>
                                <condition behavior="Platform" id="1" name="Compare speed" sid="9820609991137259" type="player">
                                    <param id="0" name="Comparison">4</param>
                                    <param id="1" name="Speed">200</param>
                                </condition>
                                <condition id="2" name="Is playing" sid="1573926283796364" type="player">
                                    <param id="0" name="Animation">&quot;Default&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="273187617196772" type="player">
                                    <param id="0" name="Animation">&quot;Slide&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                                <action behavior="Platform" id="1" name="Set max speed" sid="5718884492298545" type="player">
                                    <param id="0" name="Max Speed">500</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block disabled="1" sid="4579635146561895">
                                    <conditions>
                                        <condition id="7" name="Is mirrored" sid="9033005002704409" type="player" />
                                    </conditions>
                                    <actions>
                                        <action behavior="Platform" id="8" name="Set vector X" sid="3998903662833794" type="player">
                                            <param id="0" name="Vector X">player.Platform.VectorX - 100</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block disabled="1" sid="945048878501821">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="1407617830661685" type="System" />
                                    </conditions>
                                    <actions>
                                        <action behavior="Platform" id="8" name="Set vector X" sid="3545630414399045" type="player">
                                            <param id="0" name="Vector X">player.Platform.VectorX + 100</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block disabled="1" sid="5601769690527134">
                    <conditions>
                        <condition id="3" name="On key released" sid="4432241662958282" type="Keyboard">
                            <param id="0" name="Key">83 (S)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="8307663114270754" type="player">
                            <param id="0" name="Animation">&quot;Default&quot;</param>
                            <param id="1" name="From">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-block sid="3967256471077109">
            <conditions>
                <condition id="0" name="On key pressed" sid="6534615808574383" type="Keyboard">
                    <param id="0" name="Key">16 (Shift)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-3" name="Create object" sid="1882389942847089" type="System">
                    <param id="0" name="Object to create">Line</param>
                    <param id="1" name="Layer">0</param>
                    <param id="2" name="X">player.X</param>
                    <param id="3" name="Y">player.Y</param>
                </action>
                <action id="-10" name="Set value" sid="8899035508962759" type="Line">
                    <param id="0" name="Instance variable">EndX</param>
                    <param id="1" name="Value">Line.X</param>
                </action>
                <action id="-10" name="Set value" sid="4846626255153767" type="Line">
                    <param id="0" name="Instance variable">EndY</param>
                    <param id="1" name="Value">Line.Y</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="3702054572903179">
                    <conditions>
                        <condition id="7" name="Is mirrored" sid="3361034059296823" type="player" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="6663319305385007" type="Line">
                            <param id="0" name="Instance variable">Mirrored</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="4240878897066048">
                    <conditions>
                        <condition id="-22" name="Else" sid="3986945598233262" type="System" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="4355877657229889" type="Line">
                            <param id="0" name="Instance variable">Mirrored</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="4161914942145109">
            <conditions>
                <condition id="-19" name="Pick all" sid="1121180152665497" type="System">
                    <param id="0" name="Object">Line</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="2784133803988974">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="6266249210343519" type="player">
                            <param id="0" name="Instance variable">Anchored</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="914764290143243" type="System">
                            <param id="0" name="First value">Line.l</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Second value">player.MaxLine</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="2567881998610081">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="7354730048926733" type="Line">
                                    <param id="0" name="Instance variable">Mirrored</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-11" name="Add to" sid="8117170401036286" type="Line">
                                    <param id="0" name="Instance variable">EndX</param>
                                    <param id="1" name="Value">1000* dt</param>
                                </action>
                                <action id="-11" name="Add to" sid="3697075132306364" type="Line">
                                    <param id="0" name="Instance variable">EndY</param>
                                    <param id="1" name="Value">-1000*dt</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="9238273272052653">
                            <conditions>
                                <condition id="-22" name="Else" sid="2950348225988939" type="System" />
                            </conditions>
                            <actions>
                                <action id="-11" name="Add to" sid="2800243977648116" type="Line">
                                    <param id="0" name="Instance variable">EndX</param>
                                    <param id="1" name="Value">-1000* dt</param>
                                </action>
                                <action id="-11" name="Add to" sid="2685849640696841" type="Line">
                                    <param id="0" name="Instance variable">EndY</param>
                                    <param id="1" name="Value">-1000*dt</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="7234949411364361">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="5250679633901207" type="System" />
                    </conditions>
                    <actions>
                        <action id="-5" name="Set width" sid="5521490031926317" type="Line">
                            <param id="0" name="Width">distance(Line.X,Line.Y,Line.EndX,Line.EndY)</param>
                        </action>
                        <action id="-8" name="Set angle" sid="598636175847671" type="Line">
                            <param id="0" name="Angle">angle(Line.X,Line.Y,Line.EndX,Line.EndY)</param>
                        </action>
                        <action id="-3" name="Set position" sid="5821041709259924" type="Line">
                            <param id="0" name="X">player.X</param>
                            <param id="1" name="Y">player.Y</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="533225767306604">
            <conditions>
                <condition id="-1" name="Every tick" sid="3269662088804815" type="System" />
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="2034697599249355" type="System">
                    <param id="0" name="Variable">rspeed</param>
                    <param id="1" name="Value">rspeed-rspeed *0.8*dt</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="2638547226050525">
            <conditions>
                <condition id="0" name="On collision with another object" sid="515871726601619" type="player">
                    <param id="0" name="Object">TilemapStoneWall_lvl_2</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="4168650784020946" type="System">
                    <param id="0" name="Variable">rspeed</param>
                    <param id="1" name="Value">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="2540224453463874">
            <conditions>
                <condition id="-1" name="Every tick" sid="4513445366508093" type="System" />
            </conditions>
            <actions>
                <action id="-7" name="Scroll to position" sid="5922765720781626" type="System">
                    <param id="0" name="X">player.X</param>
                    <param id="1" name="Y">player.Y</param>
                </action>
                <action disabled="1" id="0" name="Set text" sid="1615657462577286" type="debug_text">
                    <param id="0" name="Text">player.AnimationName</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
